function e(t,e){v1Arr=t.split("."),v2Arr=e.split(".");for(var n=0;n<3;n++){var a=Number(v1Arr[n]),i=Number(v2Arr[n]);if(i<a)return t;if(a<i)return e}return t}function t(){}function o(e,n){try{i.postMessage({type:"setLocalStorageKey",data:{key:e,value:n}})}catch(t){self.clients.matchAll({type:"window"}).then(function(t){t.forEach(function(t){t.postMessage({type:"setLocalStorageKey",data:{key:e,value:n}})})})}}function l(e){try{i.postMessage({type:"getLocalStorageKey",data:{key:e}})}catch(t){self.clients.matchAll({type:"window"}).then(function(t){t.forEach(function(t){t.postMessage({type:"getLocalStorageKey",data:{key:e}})})})}}async function n(){try{var t=await(await fetch("/api/articles.json")).json();o("prevs",JSON.stringify(t))}catch(t){}}function u(t){self.registration.showNotification(t.title,{body:"Besuche unseren neuesten Artikel!",data:{url:"/article/"+t.path+".html"}})}async function a(){try{var t=await(await fetch("/api/articles.json")).json(),e=[];try{l("subs"),e=JSON.parse(f.subs)}catch(t){}var n=[];try{l("prevs"),n=JSON.parse(f.prevs)}catch(t){}for(var a=0;a<e.length;a++)for(var i=t[e[a]],s=n[e[a]],r=i.filter(function(e){return!s.some(function(t){return e.path===t.path})}),c=0;c<r.length;c++)u(r[c]);o("prevs",JSON.stringify(t))}catch(t){}}var f,i,s;["localhost","127.0.0.1"].includes(location.hostname)||(f={},i=0,s="1.1.1",self.addEventListener("install",function(t){t.waitUntil(caches.open(s).then(function(t){return t.addAll(["/","/offline.html","/index.html","/assets/styles/article.css","/assets/styles/main.css","/assets/scripts/audio-player.js","/assets/scripts/layout.js","/assets/scripts/graph.js"])})),self.skipWaiting()}),self.addEventListener("activate",function(t){t.waitUntil(caches.keys().then(function(t){return Promise.all(t.map(function(t){e(s,t)}))})),t.waitUntil(self.clients.claim())}),self.addEventListener("fetch",function(i){i.respondWith(caches.match(i.request).then(function(t){{var e="GET"===i.request.method&&(i.request.headers.get("accept").includes("text/html")||i.request.url.endsWith(".html"));if(!1===navigator.onLine||navigator.connection&&0===navigator.connection.rtt){if(e&&!t)return caches.match("/offline.html");const n=new AbortController,a=setTimeout(()=>n.abort(),1200);return t||fetch(i.request,{signal:e?n.signal:void 0}).then(function(e){return clearTimeout(a),caches.open(s).then(function(t){return t.put(i.request,e.clone()),e})}).catch(function(t){if(e)return caches.match("/offline.html")})}const n=new AbortController,a=setTimeout(()=>n.abort(),1200);return fetch(i.request,{signal:e?n.signal:void 0}).then(function(e){return clearTimeout(a),caches.open(s).then(function(t){return t.put(i.request,e.clone()),e})}).catch(function(t){if(e)return caches.match("/offline.html")})}}))}),self.addEventListener("notificationclick",function(e){e.notification.close();try{e.waitUntil(i.navigate(e.notification.data.url))}catch(t){e.waitUntil(clients.matchAll({type:"window"}).then(function(t){return 0<t.length?(t[0].navigate(e.notification.data.url),t[0].focus()):clients.openWindow(e.notification.data.url)}))}}),self.addEventListener("message",function(t){"localStorageData"===t.data.type?f=t.data.data:"setLocalStorageKeyB"===t.data.type||"getLocalStorageKeyB"===t.data.type?f[t.data.data.key]=t.data.data.value:"init"===t.data.type&&(i=t.source)}),n(),setInterval(a,1e4));